# ============================================
# Advance Chatbot - PRODUCTION Configuration
# ============================================
# For VM deployment at 103.197.77.163
# IIS reverse proxy on port 9000 -> Backend on port 3000
# ============================================

# ====================
# Application Settings
# ====================
APP_NAME=OryggiAI Chatbot
APP_VERSION=1.0.0
ENVIRONMENT=production
DEBUG=False
LOG_LEVEL=INFO

# Server Configuration (behind IIS reverse proxy)
HOST=0.0.0.0
PORT=3000

# ====================
# Google Gemini Configuration
# ====================
GEMINI_API_KEY=AIzaSyACZby5NmzSheTpTtXZEr2v4Ye1o2B-l4U
GEMINI_MODEL=gemini-2.0-flash
GEMINI_TEMPERATURE=0.0
GEMINI_MAX_TOKENS=8192

# ====================
# OpenRouter Configuration (Alternative LLM Provider)
# ====================
LLM_PROVIDER=openrouter
OPENROUTER_API_KEY=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
OPENROUTER_MODEL=tngtech/deepseek-r1t2-chimera:free

# ====================
# Database Configuration (SQL Server - VM)
# ====================
DB_DRIVER=ODBC Driver 17 for SQL Server
DB_SERVER=localhost
DB_INSTANCE=
DB_PORT=1433
DB_NAME=OryggiVedanta

# Windows Authentication (trusted connection)
DB_USE_WINDOWS_AUTH=True
DB_USERNAME=
DB_PASSWORD=

# Connection Pool Settings
DB_POOL_SIZE=10
DB_POOL_TIMEOUT=30
DB_MAX_OVERFLOW=20

# ====================
# Platform Database (Multi-Tenant SaaS)
# ====================
PLATFORM_DB_SERVER=localhost
PLATFORM_DB_INSTANCE=
PLATFORM_DB_PORT=1433
PLATFORM_DB_NAME=OryggiAI_Platform
PLATFORM_DB_USE_WINDOWS_AUTH=True
PLATFORM_DB_USERNAME=
PLATFORM_DB_PASSWORD=
PLATFORM_DB_POOL_SIZE=10
PLATFORM_DB_MAX_OVERFLOW=20
PLATFORM_DB_POOL_TIMEOUT=30

# ====================
# Gateway Agent Configuration
# ====================
# WebSocket URL for gateway agents (direct to Uvicorn on port 3000)
# Note: Port 9000 (IIS/ARR) has WebSocket proxy issues, using port 3000 directly
GATEWAY_WS_URL=ws://103.197.77.163:3000/api/gateway/ws

# ====================
# FAISS Configuration (Vector Store)
# ====================
FAISS_INDEX_PATH=./data/faiss_index

# Embedding Model
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DEVICE=cpu
EMBEDDING_PROVIDER=sentence-transformers

# ====================
# LangGraph Configuration
# ====================
LANGGRAPH_MAX_ITERATIONS=10
LANGGRAPH_TIMEOUT=60

# ====================
# Security & Authentication
# ====================
SECRET_KEY=c4b38168aad2613f01dce370fcb0310373ae58cc5b5996410d8d1fe1cb926e9c
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# JWT & Security (for multi-tenant auth)
JWT_SECRET_KEY=c4b38168aad2613f01dce370fcb0310373ae58cc5b5996410d8d1fe1cb926e9c
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Fernet encryption key (for database credentials)
ENCRYPTION_KEY=dGhpcy1pcy1hLTMyLWJ5dGUta2V5LWJhc2U2NA==

# CORS Settings (production)
CORS_ORIGINS=["http://103.197.77.163:9000", "http://103.197.77.163", "https://103.197.77.163", "http://localhost:3000"]

# ====================
# Email Configuration (SMTP Gmail)
# ====================
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=oryggiserver@gmail.com
SMTP_PASSWORD=veaa mwlw hbbq nbzz
SMTP_USE_TLS=True
SENDGRID_FROM_EMAIL=no-reply@OryggiTech.com
SENDGRID_FROM_NAME=OryggiAI Chatbot

# ====================
# Report Generation
# ====================
REPORTS_OUTPUT_DIR=./reports_output
REPORTS_MAX_ROWS=10000
REPORTS_DEFAULT_FORMAT=pdf
PDF_PAGE_SIZE=A4
PDF_FONT_FAMILY=Arial

# ====================
# Role-Based Access Control (RBAC)
# ====================
DEFAULT_ADMIN_USER=admin
DEFAULT_ADMIN_PASSWORD=changeme123
ROLES=["ADMIN", "HR_MANAGER", "HR_STAFF", "VIEWER"]

# ====================
# Action Execution
# ====================
REQUIRE_ACTION_CONFIRMATION=True
ACTION_TIMEOUT_SECONDS=300

# ====================
# Logging & Monitoring
# ====================
LOG_DIR=./logs
LOG_FILE=advance_chatbot.log
LOG_ROTATION=10 MB
LOG_RETENTION=30 days
ENABLE_AUDIT_LOG=True
AUDIT_LOG_FILE=audit.log

# ====================
# Rate Limiting
# ====================
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=60

# ====================
# Cache Configuration
# ====================
ENABLE_CACHE=True
CACHE_TTL_SECONDS=3600

# ====================
# PostgreSQL Configuration (Conversation Memory)
# ====================
USE_POSTGRES_FOR_CONVERSATIONS=True
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=chatbot_conversations
POSTGRES_USER=chatbot_user
POSTGRES_PASSWORD=chatbot_password_2025
POSTGRES_POOL_SIZE=10
POSTGRES_POOL_TIMEOUT=30
POSTGRES_MAX_OVERFLOW=20

# ====================
# ChromaDB Configuration (RAG Memory)
# ====================
CHROMADB_MODE=http
CHROMADB_HOST=localhost
CHROMADB_PORT=8000
CHROMADB_PERSIST_DIRECTORY=./chroma_db
CHROMADB_COLLECTION_NAME=conversation_memory

# ====================
# Testing Configuration
# ====================
TESTING=False
TEST_DATABASE_NAME=test_chatbot_db
